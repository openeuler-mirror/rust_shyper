#!/bin/bash

bin="./target/aarch64-tx2/release"
tftp="tx2@192.168.106.153:/tftp"

aarch64-none-elf-objcopy ${bin}/rust_shyper -O binary ${bin}/shyper.bin
# gzip ${bin}/shyper.bin
mkimage -n shyper -A arm64 -O linux -T kernel -C none -a 0x83000000 -e 0x83000000 \
-d ${bin}/shyper.bin ${bin}/shyperImage
# rm ${bin}/shyper.bin.gz
echo "*** Upload Image ***"

scp ${bin}/shyperImage ${tftp}/ImageCWM_rk3588
# scp ${bin}/shyper.bin ${tftp}/shyper.bin
# scp ${bin}/rust_shyper ${tftp}/shyper13.elf
